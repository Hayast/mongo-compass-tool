# MongoDB索引管理功能说明

## 功能概述

在CompassForm中新增了完整的MongoDB索引管理功能，包括查看、创建和删除索引。

## 主要功能

### 1. 显示索引
- **操作位置**: 在左侧树形控件中右键点击集合节点
- **菜单选项**: "显示索引"
- **功能说明**: 
  - 显示该集合下的所有索引
  - 索引会作为子节点显示在集合节点下
  - 默认的_id索引会显示为"_id (默认)"
  - 索引节点使用较小的字体和灰色显示

### 2. 创建索引
- **操作位置**: 在左侧树形控件中右键点击集合节点
- **菜单选项**: "创建索引"
- **功能说明**:
  - 弹出创建索引对话框
  - 支持自定义索引名称
  - 支持JSON格式的字段定义
  - 支持索引选项配置（unique、sparse、background等）
  - 提供默认的索引名称前缀和示例配置

### 3. 索引管理
- **操作位置**: 右键点击索引节点
- **菜单选项**: 
  - "查看详情": 显示索引的完整配置信息
  - "删除索引": 删除选中的索引（_id索引受保护，不能删除）

## 使用示例

### 创建复合索引
1. 右键点击集合节点，选择"创建索引"
2. 索引名称: `idx_users_name_email`
3. 字段定义:
```json
{
  "name": 1,
  "email": 1
}
```
4. 索引选项:
```json
{
  "unique": true,
  "sparse": false,
  "background": true
}
```

### 创建文本索引
1. 右键点击集合节点，选择"创建索引"
2. 索引名称: `idx_content_text`
3. 字段定义:
```json
{
  "content": "text"
}
```

### 创建地理空间索引
1. 右键点击集合节点，选择"创建索引"
2. 索引名称: `idx_location_2dsphere`
3. 字段定义:
```json
{
  "location": "2dsphere"
}
```

## 注意事项

1. **默认索引保护**: 系统会自动保护默认的_id索引，不允许删除
2. **索引名称**: 建议使用有意义的索引名称，便于管理
3. **后台创建**: 建议在索引选项中设置`"background": true`，避免阻塞数据库操作
4. **唯一索引**: 创建唯一索引前请确保数据中没有重复值
5. **稀疏索引**: 稀疏索引只包含有该字段的文档，适用于可选字段

## 技术实现

- 使用MongoDB.Driver库的索引管理API
- 支持所有MongoDB索引类型（单字段、复合、文本、地理空间等）
- 实时刷新索引列表
- 友好的错误处理和用户提示
- 美观的界面设计，符合现代UI标准

## 错误处理

- JSON格式错误会显示详细的错误信息
- 索引创建失败会显示具体的错误原因
- 网络连接问题会有相应的提示
- 权限不足时会显示权限错误信息 